<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Student Manager</title>
  <style>
    body {
    font-family: "Poppins", Arial, sans-serif;
    background: linear-gradient(135deg, #74b9ff, #a29bfe);
    background-attachment: fixed; /* keeps gradient full when scrolling */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: 100vh; /* fills entire scroll area */
    margin: 0;
    padding: 40px 10px;
    color: #2d3436;
    }

    h1 {
      color: white;
      margin-bottom: 20px;
      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
    }

    .card {
      background: #ffffff;
      border-radius: 16px;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15);
      padding: 30px 40px;
      text-align: center;
      width: 450px;
      transition: transform 0.2s;
    }

    .card:hover {
      transform: translateY(-2px);
    }

    label {
      display: inline-block;
      width: 90px; /* ‚Üê increase this value (was 70px) */
      text-align: left;
      font-weight: 600;
      margin-bottom: 8px;
    }

    input {
      width: 200px;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 14px;
      margin-bottom: 12px;
      transition: border-color 0.2s;
    }

    input:focus {
      border-color: #0984e3;
      outline: none;
    }

    .buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-top: 12px;
    }

    button {
      border: none;
      border-radius: 6px;
      padding: 8px 16px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s, transform 0.1s;
    }

    button:hover {
      transform: scale(1.05);
    }

    .btn-get { background: #00b894; }
    .btn-add { background: #0984e3; }
    .btn-update { background: #fdcb6e; color: #2d3436; }
    .btn-delete { background: #d63031; }

    .btn-get:hover { background: #019370; }
    .btn-add:hover { background: #0772c5; }
    .btn-update:hover { background: #e0b65e; }
    .btn-delete:hover { background: #b32425; }

    ul {
      list-style: none;
      padding: 0;
      margin-top: 20px;
      text-align: left;
      max-width: 360px;
    }

    li {
      background: #f1f2f6;
      margin: 6px 0;
      padding: 10px 14px;
      border-radius: 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: 500;
    }

    .btn_remove {
      background-color: #d63031;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 4px 8px;
      font-size: 12px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .btn_remove:hover {
      background-color: #b32425;
    }

    pre {
      background: #ffffffc9;
      border: 1px solid #dfe6e9;
      border-radius: 8px;
      padding: 12px;
      margin-top: 20px;
      width: 500px;
      min-height: 200px; /* adds visible height */
      white-space: pre-wrap;
      text-align: left;
      font-size: 13px;
      overflow-x: auto;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    footer {
      margin-top: 25px;
      color: #fff;
      font-size: 13px;
      opacity: 0.9;
    }
  </style>
</head>
<body>

  <h1>üéì Student Manager</h1>

  <div class="card">
    <div>
      <label for="name">Name:</label>
      <input id="name" placeholder="Enter name" /><br>
      <label for="uni">University:</label>
      <input id="uni" placeholder="Enter uni" /><br>
    </div>

    <div class="buttons">
      <button class="btn-get" type="button" onclick="getStudents()">Get All</button>
      <button class="btn-add" type="button" onclick="addStudent()">Add Student</button>
      <button class="btn-update" type="button" onclick="updateStudent()">Update</button>
      <button class="btn-delete" type="button" onclick="deleteStudent()">Remove</button>
    </div>
  </div>

  <ul id="students"></ul>
  <pre id="output"></pre>

  <footer>API Connected to Render ¬∑ Student CRUD App</footer>

  <script>
    const API = 'https://student-api-1bxc.onrender.com/students';
    const output = document.getElementById('output');

    async function getStudents() {
      try {
        const res = await fetch(API);
        const data = await res.json();
        output.textContent = JSON.stringify(data, null, 2);

        let students_ul = document.getElementById('students');
        students_ul.innerHTML = '';
        data.forEach(s => {
          let li = document.createElement('li');
          li.innerHTML = s.name + " ‚Äî " + s.uni;

          let btn = document.createElement('button');
          btn.innerHTML = 'X';
          btn.className = 'btn_remove';
          btn.addEventListener('click', () => {
            deleteStudent_2(s.name);
            getStudents();
          });
          li.appendChild(btn);
          students_ul.appendChild(li);
        });
      } catch (err) {
        output.textContent = 'Error: ' + err;
      }
    }

    async function addStudent() {
      const name = document.getElementById('name').value.trim();
      const uni = document.getElementById('uni').value.trim();
      if (!name || !uni) return alert('Enter both name and university');

      try {
        const res = await fetch(API, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ name, uni })
        });
        const data = await res.json();
        output.textContent = JSON.stringify(data, null, 2);
        getStudents();
      } catch (err) {
        output.textContent = 'Error: ' + err;
      }
    }

    async function updateStudent() {
      const name = document.getElementById('name').value.trim();
      const uni = document.getElementById('uni').value.trim();
      if (!name || !uni) return alert('Enter both name and university');

      try {
        const res = await fetch(API, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ name, uni })
        });
        const data = await res.json();
        output.textContent = JSON.stringify(data, null, 2);
        getStudents();
      } catch (err) {
        output.textContent = 'Error: ' + err;
      }
    }

    async function deleteStudent() {
      const name = document.getElementById('name').value.trim();
      if (!name) return alert('Enter the name to remove');

      try {
        const res = await fetch(API, {
          method: 'DELETE',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ name })
        });
        const data = await res.json();
        output.textContent = JSON.stringify(data, null, 2);
        getStudents();
      } catch (err) {
        output.textContent = 'Error: ' + err;
      }
    }

    async function deleteStudent_2(selectedName) {
      try {
        const res = await fetch(API, {
          method: 'DELETE',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ name: selectedName })
        });
        const data = await res.json();
        output.textContent = JSON.stringify(data, null, 2);
        getStudents();
      } catch (err) {
        output.textContent = 'Error: ' + err;
      }
    }
  </script>
</body>
</html>
